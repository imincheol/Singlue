# 기능 명세 (Feature Specifications)

## 1. 핵심 기능 (Core Features)
### 🎵 YouTube Player Integration
- **영상 재생**: YouTube 영상을 앱 내에서 바로 재생합니다.
- **재생 제어**: 재생/일시정지, 영상 탐색(Skip) 등 기본적인 플레이어 기능을 제공합니다.

### 🤖 AI Curator (Gemini)
- **AI 큐레이터**: AI가 영상의 내용을 분석하여 실시간으로 가사 데이터를 생성합니다.
- **가사 생성**: 원문 가사뿐만 아니라 발음(Pronunciation)과 해석(Translation)까지 자동으로 생성합니다.
- **힌트 제공**: 사용자가 정확한 생성을 위해 가수나 노래 제목 등 힌트를 줄 수 있습니다.

### ✨ AI Lyrics Enrichment
- **가사 채우기**: 검색해온 가사에 발음이나 해석이 없는 경우, AI가 부족한 정보를 자동으로 채워줍니다.
- **다국어 맞춤 생성**: 사용자가 선택한 언어(App Language)에 맞춰 발음과 해석을 생성합니다.
  - **한국어(KO)**: 발음은 한글로 표기(예: "Xin chào" -> "씬 짜오"), 해석은 한국어로 제공.
  - **영어(EN)**: 발음은 로마자로 표기(예: "Annyeong" -> "Annyeong"), 해석은 영어로 제공.
  - **베트남어(VI)**: 발음/해석이 불필요한 경우 생략하거나 원문 유지.
- **베트남어 발음 표기 기준**: 베트남어 가사를 다른 언어로 발음 표기할 때는 **북부 발음(Hanoi 표준)**을 기준으로 합니다.
  - 예: "Không" -> "콩" (북부), "Cảm ơn" -> "깜 언" (북부)
- **자동 감지**: 불완전한 가사가 로드되면 "AI로 채우기" 버튼이 자동으로 활성화됩니다.

### 🔍 Lyrics Search & Sync
- **가사 검색**: 전 세계 노래 가사 데이터베이스(LRCLIB)에서 원하는 곡을 검색합니다.
- **싱크 매핑**: 검색된 가사를 현재 재생 중인 유튜브 영상과 연결(Mapping)하여 저장합니다.
- **클라우드 공유**: 매핑된 가사 정보와 싱크 오프셋은 **Supabase**에 저장되어 모든 사용자가 공유할 수 있습니다.
- **다국어 저장**: 한 번 생성된 가사의 발음/해석은 언어별(KO, EN 등)로 구분되어 저장됩니다. 다음에 다른 사용자가 접속하면 설정된 언어에 맞는 발음을 즉시 불러옵니다.
- **스마트 정렬**: 영상 길이와 가장 비슷한 결과물을 우선적으로 보여주어 정확도를 높입니다.

### 📝 Lyrics Display System
- **3단 가사 보기**: [원문] - [발음] - [해석]을 한눈에 볼 수 있는 3단 구조를 제공합니다.
- **맞춤형 토글**: 발음이나 해석이 필요 없을 경우 켜고 끌 수 있습니다.
- **자동 스크롤**: 노래 재생에 맞춰 현재 가사가 강조되고 자동으로 스크롤됩니다.
- **미니 뷰어**: 플레이어 화면 하단에 현재 가사 3줄을 간략하게 보여줍니다.

### 🌍 Internationalization (다국어 지원)
- **지원 언어**: 한국어(KO), 영어(EN), 베트남어(VI).
- **자동 설정**: 사용자의 브라우저 설정에 맞춰 언어가 자동으로 적용됩니다.
- **레이아웃 최적화**: 베트남어 등 문장이 긴 언어에서도 메인 타이틀이 3줄을 넘지 않도록 레이아웃 및 텍스트를 최적화합니다.

## 2. 사용자 편의 기능 (UX)
### ⏯️ Player Controls
- **재생 컨트롤**: 재생/일시정지, 10초 건너뛰기, 탐색 바 등 영상 제어 기능.
- **자막 컨트롤**:
  - **배속 조절**: 0.5배속 ~ 2.0배속까지 속도 조절 가능.
  - **싱크 조절**: 영상과 가사가 맞지 않을 때 미세하게 조정(±0.1초 등) 가능.
  - **가사 변경**: 언제든지 다른 가사로 다시 검색하거나 변경 가능.
- **정보 새로고침**: 영상 정보가 제대로 로드되지 않았을 때 다시 불러오는 기능.

### 📌 General UI
- **버전 표시**: 상단 헤더의 로고 옆에 현재 앱의 버전(예: v0.0.1)을 표시하여, 사용자가 현재 접속한 배포 버전을 쉽게 확인할 수 있도록 합니다.
- **테마 토글 (Dark/Light Mode)**: 
  - 상단 헤더에 다크/라이트 모드 전환 버튼을 제공합니다.
  - 해/달 아이콘으로 직관적인 UI를 제공합니다.
  - 사용자의 테마 선택은 `localStorage`에 저장되어 다음 방문 시에도 유지됩니다.
  - 모든 페이지와 컴포넌트에서 일관된 테마가 적용됩니다.

### 📚 Community Library (Global)
- **전체 목록 공유**: 모든 사용자가 등록한 비디오와 가사 매핑 정보가 Supabase에 저장되어 공유됩니다.
- **실시간 업데이트**: 새로운 곡이 등록되면 라이브러리 목록에 즉시 반영됩니다. (새로고침 시)
- **정보 표시**: 썸네일(YouTube), 곡 제목(Artist - Title), 등록일 등의 정보를 제공합니다.


## 3. 설정 (Settings)
- **발음/해석 표시 설정**: 학습 스타일에 따라 UI를 커스터마이징 할 수 있습니다.
- **API 키 관리**: 사용자가 본인의 Gemini API 키를 안전하게 등록하고 사용할 수 있습니다.
- **Gemini 모델 전략**:
- **Gemini 모델 전략**:
  - **Primary Model**: `gemini-3-pro-preview` (최신 Reasoning 모델)
  - **Fallback System**: API 오류 발생 시 다음 순서대로 모델을 자동 전환:
    1. `gemini-3-pro-preview`
    2. `gemini-1.5-flash-002`
    3. `gemini-1.5-flash`
    4. `gemini-1.5-flash-001`
    5. `gemini-1.5-pro`
    6. `gemini-2.0-flash-exp`
  - **목적**: 
    - 최신 Gemini 3의 추론 능력 활용.
    - 404/429 오류에 대한 강력한 내성 확보.




## 4. 배포 및 SEO 설정 (Deployment & SEO)
- **메타데이터 설정**: 검색 엔진 최적화(SEO)를 위한 Title, Description, Keywords 메타 태그 설정.
- **Open Graph (OG) 태그**: SNS(Facebook, Twitter, KakaoTalk 등) 공유 시 링크 미리보기를 위한 제목, 설명, 썸네일 이미지 설정.
- **파비콘 (Favicon)**: 브라우저 탭 및 홈 화면 바로가기에 표시될 애플리케이션 아이콘 설정.
- **검색 로봇 제어 (Robots.txt)**: 검색 엔진 크롤러의 접근을 제어하고 사이트맵 위치를 명시.
- **사이트맵 (Sitemap)**: 검색 엔진이 사이트 구조를 파악할 수 있도록 URL 목록 제공 (`sitemap.xml`).
- **웹 앱 매니페스트 (Web App Manifest)**: 모바일 홈 화면 추가 시 앱처럼 동작하도록 `manifest.json` 설정 (PWA 기본 요건).
- **구조화된 데이터 (JSON-LD)**: 검색 결과에 소프트웨어/앱 정보가 잘 표시되도록 Schema.org 표준 데이터 추가.
- **표준 주소 (Canonical URL)**: 중복 콘텐츠 방지를 위한 대표 URL 설정.
